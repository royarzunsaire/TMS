
@{
    ViewBag.Title = "KPI Post Curso";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var fechaInicio = new DateTime(DateTime.Now.Year, DateTime.Now.Month, 1);
    fechaInicio = fechaInicio.Date;
    var fechaTermino = fechaInicio.AddMonths(1).AddDays(-1).Date;
    var fecha = ViewBag.fechaInicio + " - " + ViewBag.fechaTermino;
}
@section Styles {
    <link href="~/Content/css/PanelGerencia.css" rel="stylesheet" type="text/css" />
}
<h2 class="page-title">Panel de Gerencia</h2>
@using (Html.BeginForm("Replace", "PanelGerencia", FormMethod.Post, new { @target = "_blank", @id = ("form-filter") }))
{
    @Html.AntiForgeryToken()
    <div class="row">
        <div class="col-md-4">
            <div class="form-group">
                @Html.Label("Fecha de Inicio", htmlAttributes: new { @class = "control-label" })
                <div class="input-group">
                    @Html.EditorFor(model => fechaInicio, new { htmlAttributes = new { @class = "form-control datepicker date" } })
                    <span class="input-group-addon">
                        <i class="fa fa-calendar"></i>
                    </span>
                </div>
                @Html.ValidationMessageFor(model => fechaInicio, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                @Html.Label("Fecha de Termino", htmlAttributes: new { @class = "control-label" })
                <div class="input-group">
                    @Html.EditorFor(model => fechaTermino, new { htmlAttributes = new { @class = "form-control datepicker date" } })
                    <span class="input-group-addon">
                        <i class="fa fa-calendar"></i>
                    </span>
                </div>
                @Html.ValidationMessageFor(model => fechaTermino, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                @Html.Label("Filtrar", htmlAttributes: new { @class = "control-label" })
                <div class="input-group">
                    <button class="filter" type="button"><i class="fa fa-filter"></i></button>
                </div>
                @Html.ValidationMessageFor(model => fechaTermino, "", new { @class = "text-danger" })
            </div>
        </div>
    </div>
}
<div class="row">
    <div class="col-md-12">
        <div class="portlet light ">
            <div class="portlet-title">
                <div class="caption caption-md">
                    <i class="icon-bar-chart font-dark hide"></i>
                    <span class="caption-subject bold uppercase">Cursos Sense</span>
                </div>
                <div class="actions">
                    <button id="CursosSense" type="button" class="excel btn btn-primary btn-sm  glyphicon glyphicon-file"></button>
                </div>
            </div>
            <div class="portlet-body">
                <div class="tab-content">
                    <div class="tab-pane active" id="">
                        <div class="table-scrollable table-scrollable-borderless">
                            <div class="scroll">
                                <div id="table-wrapper">
                                    <div id="table-scroll" class="CursosSenseReporte">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="portlet light ">
            <div class="portlet-title">
                <div class="caption caption-md">
                    <i class="icon-bar-chart font-dark hide"></i>
                    <span class="caption-subject bold uppercase">Cursos Presenciales y Recertificaciones</span>
                </div>
                <div class="actions">
                    <button id="CursosPresenciales" type="button" class="excel btn btn-primary btn-sm  glyphicon glyphicon-file"></button>
                </div>
            </div>
            <div class="portlet-body">
                <div class="tab-content">
                    <div class="tab-pane active" id="">
                        <div class="table-scrollable table-scrollable-borderless">
                            <div class="scroll">
                                <div id="table-wrapper">
                                    <div id="table-scroll" class="CursosPresencialesReporte">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="portlet light ">
            <div class="portlet-title">
                <div class="caption caption-md">
                    <i class="icon-bar-chart font-dark hide"></i>
                    <span class="caption-subject bold uppercase">Cursos Sincronicos</span>
                </div>
                <div class="actions">
                    <button id="CursosSincronicos" type="button" class="excel btn btn-primary btn-sm  glyphicon glyphicon-file"></button>
                </div>
            </div>
            <div class="portlet-body">
                <div class="tab-content">
                    <div class="tab-pane active" id="">
                        <div class="table-scrollable table-scrollable-borderless">
                            <div class="scroll">
                                <div id="table-wrapper">
                                    <div id="table-scroll" class="CursosSincronicosReporte">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="portlet light ">
            <div class="portlet-title">
                <div class="caption caption-md">
                    <i class="icon-bar-chart font-dark hide"></i>
                    <span class="caption-subject bold uppercase">Cursos Asincronicos</span>
                </div>
                <div class="actions">
                    <button id="CursosAsincronicos" type="button" class="excel btn btn-primary btn-sm  glyphicon glyphicon-file"></button>
                </div>
            </div>
            <div class="portlet-body">
                <div class="tab-content">
                    <div class="tab-pane active" id="">
                        <div class="table-scrollable table-scrollable-borderless">
                            <div class="scroll">
                                <div id="table-wrapper">
                                    <div id="table-scroll" class="CursosAsincronicosReporte">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="portlet light ">
            <div class="portlet-title">
                <div class="caption caption-md">
                    <i class="icon-bar-chart font-dark hide"></i>
                    <span class="caption-subject bold uppercase">Cursos R24 Presenciales</span>
                </div>
                <div class="actions">
                    <button id="CursosR24Presenciales" type="button" class="excel btn btn-primary btn-sm  glyphicon glyphicon-file"></button>
                </div>
            </div>
            <div class="portlet-body">
                <div class="tab-content">
                    <div class="tab-pane active" id="">
                        <div class="table-scrollable table-scrollable-borderless">
                            <div class="scroll">
                                <div id="table-wrapper">
                                    <div id="table-scroll" class="CursosR24PresencialesReporte">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="portlet light ">
            <div class="portlet-title">
                <div class="caption caption-md">
                    <i class="icon-bar-chart font-dark hide"></i>
                    <span class="caption-subject bold uppercase">DJO Online</span>
                </div>
                <div class="actions">
                    <button id="CursosDJOOnline" type="button" class="excel btn btn-primary btn-sm  glyphicon glyphicon-file"></button>
                </div>
            </div>
            <div class="portlet-body">
                <div class="tab-content">
                    <div class="tab-pane active" id="">
                        <div class="table-scrollable table-scrollable-borderless">
                            <div class="scroll">
                                <div id="table-wrapper">
                                    <div id="table-scroll" class="CursosDJOOnlineReporte">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div hidden>
    @using (Html.BeginForm("CursosSenseReporte", "PanelGerencia", FormMethod.Post, new { @id = ("form-CursosSenseReporte") }))
    {
        @Html.AntiForgeryToken()
    }
</div>
<div hidden>
    @using (Html.BeginForm("CursosPresencialesReporte", "PanelGerencia", FormMethod.Post, new { @id = ("form-CursosPresencialesReporte") }))
    {
        @Html.AntiForgeryToken()
    }
</div>
<div hidden>
    @using (Html.BeginForm("CursosSincronicosReporte", "PanelGerencia", FormMethod.Post, new { @id = ("form-CursosSincronicosReporte") }))
    {
        @Html.AntiForgeryToken()
    }
</div>
<div hidden>
    @using (Html.BeginForm("CursosAsincronicosReporte", "PanelGerencia", FormMethod.Post, new { @id = ("form-CursosAsincronicosReporte") }))
    {
        @Html.AntiForgeryToken()
    }
</div>
<div hidden>
    @using (Html.BeginForm("CursosR24PresencialesReporte", "PanelGerencia", FormMethod.Post, new { @id = ("form-CursosR24PresencialesReporte") }))
    {
        @Html.AntiForgeryToken()
    }
</div>
<div hidden>
    @using (Html.BeginForm("CursosDJOOnlineReporte", "PanelGerencia", FormMethod.Post, new { @id = ("form-CursosDJOOnlineReporte") }))
    {
        @Html.AntiForgeryToken()
    }
</div>

@section Scripts{
    <script>
        $(".filter").on('click', function () {
            $('.CursosSenseReporte').html("Cargando contenido ...");
            $('.CursosPresencialesReporte').html("Cargando contenido ...");
            $('.CursosSincronicosReporte').html("Cargando contenido ...");
            $('.CursosAsincronicosReporte').html("Cargando contenido ...");
            $('.CursosR24PresencialesReporte').html("Cargando contenido ...");
            $('.CursosDJOOnlineReporte').html("Cargando contenido ...");

            var inicio = $("#fechaInicio").val().toString();
            var end = $("#fechaTermino").val().toString();

            form = $('#form-CursosSenseReporte');
            url = form.attr('action');

            $.ajax({
                method: "GET",
                url: url,
                dataType: "json",
                data: { fechaInicio: inicio, fechaTermino: end },
                error: function (request, status, error) {
                    alert(request.responseText);
                },
            }).done(function (result) {

                $('.CursosSenseReporte').html(result.data);
            });

            form = $('#form-CursosPresencialesReporte');
            url = form.attr('action');

            $.ajax({
                method: "GET",
                url: url,
                dataType: "json",
                data: { fechaInicio: inicio, fechaTermino: end },
                error: function (request, status, error) {
                    alert(request.responseText);
                },
            }).done(function (result) {

                $('.CursosPresencialesReporte').html(result.data);
            });

            form = $('#form-CursosSincronicosReporte');
            url = form.attr('action');

            $.ajax({
                method: "GET",
                url: url,
                dataType: "json",
                data: { fechaInicio: inicio, fechaTermino: end },
                error: function (request, status, error) {
                    alert(request.responseText);
                },
            }).done(function (result) {

                $('.CursosSincronicosReporte').html(result.data);
            });

            form = $('#form-CursosAsincronicosReporte');
            url = form.attr('action');

            $.ajax({
                method: "GET",
                url: url,
                dataType: "json",
                data: { fechaInicio: inicio, fechaTermino: end },
                error: function (request, status, error) {
                    alert(request.responseText);
                },
            }).done(function (result) {

                $('.CursosAsincronicosReporte').html(result.data);
            });

            form = $('#form-CursosR24PresencialesReporte');
            url = form.attr('action');

            $.ajax({
                method: "GET",
                url: url,
                dataType: "json",
                data: { fechaInicio: inicio, fechaTermino: end },
                error: function (request, status, error) {
                    alert(request.responseText);
                },
            }).done(function (result) {

                $('.CursosR24PresencialesReporte').html(result.data);
            });

            form = $('#form-CursosDJOOnlineReporte');
            url = form.attr('action');

            $.ajax({
                method: "GET",
                url: url,
                dataType: "json",
                data: { fechaInicio: inicio, fechaTermino: end },
                error: function (request, status, error) {
                    alert(request.responseText);
                },
            }).done(function (result) {

                $('.CursosDJOOnlineReporte').html(result.data);
            });
        })

        var id = "";

        $('.excel').on('click', function () {
            var form = $('#form-filter');
            url = form.attr('action');
            if (id == "") {
                url = url.replace("Replace", this.id);
            } else {
                url = url.replace(id, this.id);
            }
            form.attr('action', url);
            console.log(form.attr('action'));
            id = this.id;
            form.submit();

        });
        $(document).ready(function () {
            $(".filter").trigger('click');
        });
    </script>
}